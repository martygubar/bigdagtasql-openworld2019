{"paragraphs":[{"title":"1.  Oracle Database: Reset Workshop (drop tables and Kafka topic)","text":"%sh \n# Reset the workshop.  Reload the browser after running.\n/home/oracle/bikes/bikes/software-setup/reset-workshop.sh","user":"anonymous","dateUpdated":"2019-08-08T20:41:19-0400","config":{"editorSetting":{"language":"sh","editOnDblClick":false},"colWidth":12,"editorMode":"ace/mode/sh","title":true,"results":{},"enabled":true,"editorHide":false},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1521594199712_-187310977","id":"20180226-140532_1445972519","dateCreated":"2018-03-20T21:03:19-0400","dateStarted":"2018-09-05T14:17:42-0400","dateFinished":"2018-09-05T14:17:49-0400","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:21672"},{"title":"2 Review CitiBike Ridership Information","text":"%jdbc\n-- Query station data.  This will be saved as a lookup table.\nselect *\nfrom ridership\norder by to_date(day, 'MM/DD/YY') asc\n;","user":"oracle","dateUpdated":"2019-08-08T20:41:25-0400","config":{"editorSetting":{"language":"sql","editOnDblClick":false},"colWidth":12,"editorMode":"ace/mode/sql","title":true,"results":{"0":{"graph":{"mode":"multiBarChart","height":300,"optionOpen":false,"setting":{"multiBarChart":{"stacked":false}},"commonSetting":{},"keys":[{"name":"DAY","index":0,"aggr":"sum"}],"groups":[],"values":[{"name":"NUM_TRIPS","index":1,"aggr":"sum"}]},"helium":{}}},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TABLE","data":"DAY\tNUM_TRIPS\tMILES_TRAVELED\tMEMBERS_TOTAL\tPASSES_24HR_SOLD\tPASSES_3DAY_SOLD\n1/1/19\t22145\t44131\t297823\t2429\t49\n1/2/19\t38249\t58975\t297908\t1062\t36\n1/3/19\t42181\t62500\t297976\t969\t31\n1/4/19\t44420\t65739\t298017\t1173\t33\n1/5/19\t17636\t24326\t298048\t462\t8\n1/6/19\t31764\t50481\t298094\t1711\t31\n1/7/19\t36928\t52310\t298152\t514\t18\n1/8/19\t41728\t60469\t298218\t654\t23\n1/9/19\t44882\t63480\t298263\t646\t23\n1/10/19\t39449\t53225\t298299\t478\t13\n1/11/19\t33196\t44226\t298331\t465\t23\n1/12/19\t25431\t35133\t298361\t772\t26\n1/13/19\t23020\t33018\t298399\t700\t18\n1/14/19\t35408\t48021\t298439\t402\t9\n1/15/19\t39538\t54751\t298470\t511\t19\n1/16/19\t40854\t56553\t298510\t513\t7\n1/17/19\t39417\t53430\t298546\t463\t14\n1/18/19\t34478\t47215\t298574\t542\t27\n1/19/19\t23933\t34580\t298595\t865\t28\n1/20/19\t14440\t19131\t298616\t368\t8\n1/21/19\t10392\t11911\t298632\t141\t5\n1/22/19\t28913\t37788\t298665\t315\t14\n1/23/19\t42028\t59442\t298692\t526\t10\n1/24/19\t20328\t27931\t298721\t260\t7\n1/25/19\t39298\t54567\t298748\t621\t21\n1/26/19\t26607\t38634\t298778\t933\t18\n1/27/19\t30338\t48280\t298828\t1510\t19\n1/28/19\t36173\t49109\t298878\t448\t13\n1/29/19\t31355\t42066\t298919\t341\t12\n1/30/19\t25496\t33178\t298947\t263\t8\n1/31/19\t18882\t22917\t298975\t186\t8\n2/1/19\t25289\t31752\t298998\t255\t11\n2/2/19\t22280\t30802\t299032\t627\t19\n2/3/19\t32274\t52757\t299103\t1743\t24\n2/4/19\t47049\t73262\t299172\t1180\t42\n2/5/19\t54710\t87917\t299249\t1770\t42\n2/6/19\t39616\t55696\t299296\t754\t27\n2/7/19\t43840\t62728\t299341\t765\t22\n2/8/19\t36964\t52442\t299383\t864\t22\n2/9/19\t24041\t33607\t299409\t811\t10\n2/10/19\t24434\t35873\t299449\t935\t6\n2/11/19\t39197\t54362\t299493\t563\t20\n2/12/19\t16044\t22190\t299521\t150\t4\n2/13/19\t35523\t48870\t299551\t439\t21\n2/14/19\t42313\t61381\t299589\t773\t26\n2/15/19\t47524\t74286\t299633\t1590\t58\n2/16/19\t31347\t52760\t299683\t2030\t58\n2/17/19\t24287\t39660\t299711\t1439\t30\n2/18/19\t26176\t37500\t299757\t810\t17\n2/19/19\t35226\t49024\t299810\t595\t10\n2/20/19\t20694\t28763\t299835\t221\t15\n2/21/19\t40082\t60375\t299871\t961\t37\n2/22/19\t42338\t61956\t299913\t1097\t49\n2/23/19\t31956\t49887\t299956\t1635\t28\n2/24/19\t24503\t37473\t299993\t992\t19\n2/25/19\t34736\t47207\t300029\t495\t14\n2/26/19\t38126\t52805\t300067\t524\t23\n2/27/19\t37028\t48666\t300097\t464\t27\n2/28/19\t38784\t53031\t300157\t652\t30\n3/1/19\t30242\t41583\t300183\t522\t26\n3/2/19\t18001\t27381\t300213\t570\t25\n3/3/19\t23240\t35764\t300264\t1115\t22\n3/4/19\t28424\t39154\t300319\t563\t23\n3/5/19\t37103\t50155\t300367\t552\t24\n3/6/19\t33287\t42845\t300409\t376\t27\n3/7/19\t35913\t46582\t300450\t468\t15\n3/8/19\t40416\t55748\t300503\t852\t32\n3/9/19\t38929\t68739\t300574\t3010\t35\n3/10/19\t18897\t28056\t300611\t662\t16\n3/11/19\t52412\t80705\t300691\t1749\t56\n3/12/19\t47214\t66518\t300757\t1003\t40\n3/13/19\t50121\t71556\t300825\t1194\t42\n3/14/19\t57476\t86864\t300904\t1826\t82\n3/15/19\t57517\t95073\t300987\t2843\t119\n3/16/19\t42144\t74307\t301086\t3369\t97\n3/17/19\t36826\t64440\t301187\t2755\t73\n3/18/19\t46535\t68775\t301278\t1361\t54\n3/19/19\t52997\t78320\t301381\t1602\t49\n3/20/19\t55396\t83442\t301476\t1723\t58\n3/21/19\t21248\t27005\t301520\t342\t14\n3/22/19\t35477\t49691\t301579\t1076\t51\n3/23/19\t37379\t61407\t301671\t2693\t74\n3/24/19\t50318\t100843\t301827\t5896\t79\n3/25/19\t53463\t79824\t301952\t1562\t64\n3/26/19\t55421\t81425\t302083\t1715\t49\n3/27/19\t54483\t78975\t302176\t1583\t56\n3/28/19\t58538\t87465\t302430\t1966\t87\n3/29/19\t59324\t91975\t302587\t2573\t103\n3/30/19\t66672\t144759\t302941\t9151\t135\n3/31/19\t32768\t52486\t303060\t1916\t52\n4/1/19\t51399\t75072\t303223\t1466\t76\n4/2/19\t57903\t83399\t303386\t1483\t73\n4/3/19\t67924\t108780\t303552\t3013\t79\n4/4/19\t66403\t104268\t303699\t2633\t87\n4/5/19\t34470\t46930\t303766\t812\t46\n4/6/19\t66532\t143054\t303958\t8852\t139\n4/7/19\t64713\t138291\t304216\t8191\t87\n4/8/19\t70514\t123304\t304525\t3804\t89\n4/9/19\t59336\t86248\t304677\t1684\t79\n4/10/19\t70988\t112985\t304865\t2845\t116\n4/11/19\t62430\t93232\t305003\t2222\t93\n4/12/19\t58010\t92517\t305134\t2811\t118\n4/13/19\t71500\t159264\t305362\t10443\t128\n4/14/19\t58474\t123470\t305584\t7263\t119\n4/15/19\t45663\t71673\t305722\t1816\t75\n4/16/19\t63323\t106799\t305906\t3197\t134\n4/17/19\t65249\t109668\t306077\t3276\t89\n4/18/19\t61568\t98909\t306205\t2845\t104\n4/19/19\t64939\t120796\t306365\t5782\t271\n4/20/19\t36785\t68489\t306453\t4049\t115\n4/21/19\t51869\t114490\t306647\t7439\t140\n4/22/19\t44112\t71869\t306827\t3426\t69\n4/23/19\t75443\t143334\t307082\t5928\t202\n4/24/19\t77736\t144473\t307320\t5868\t135\n4/25/19\t60834\t101124\t307484\t3569\t114\n4/26/19\t37121\t55000\t307578\t1387\t76\n4/27/19\t56442\t111440\t307737\t7022\t151\n4/28/19\t41204\t68976\t307862\t3338\t87\n4/29/19\t60801\t98707\t308020\t2829\t104\n4/30/19\t62668\t99225\t308192\t2715\t94\n5/1/19\t60904\t93434\t308383\t2285\t106\n5/2/19\t68714\t115573\t308575\t3763\t171\n5/3/19\t62410\t100885\t308738\t3452\t151\n5/4/19\t56025\t114113\t308919\t7286\t110\n5/5/19\t16169\t25232\t308988\t802\t16\n5/6/19\t69920\t121887\t309187\t4178\t166\n5/7/19\t72829\t126637\t309356\t4055\t124\n5/8/19\t76398\t130821\t309530\t4255\t131\n5/9/19\t66689\t105721\t309646\t2851\t130\n5/10/19\t68044\t114830\t309790\t4427\t163\n5/11/19\t69788\t153674\t310021\t10581\t133\n5/12/19\t10730\t15759\t310063\t475\t9\n5/13/19\t22300\t29434\t310141\t553\t19\n5/14/19\t42783\t61756\t310248\t1301\t73\n5/15/19\t74314\t129217\t310395\t4484\t140\n5/16/19\t77889\t139278\t310590\t5354\t174\n5/17/19\t72118\t126992\t310760\t5124\t167\n5/18/19\t73143\t162302\t310992\t11292\t227\n5/19/19\t69920\t154638\t311245\t10321\t193\n5/20/19\t74494\t133696\t311495\t5225\t173\n5/21/19\t79261\t139284\t311686\t5088\t160\n5/22/19\t82021\t144186\t311888\t5431\t153\n5/23/19\t56578\t93244\t312082\t3527\t121\n5/24/19\t74866\t141169\t312276\t7322\t245\n5/25/19\t59492\t136772\t312484\t10682\t279\n5/26/19\t49950\t118192\t312648\t9325\t145\n5/27/19\t66595\t160750\t312896\t12124\t136\n5/28/19\t59435\t97330\t313092\t2992\t96\n5/29/19\t55098\t87647\t313251\t2952\t111\n5/30/19\t52484\t84325\t313402\t2831\t129\n5/31/19\t83347\t156832\t313606\t7586\t261\n6/1/19\t76416\t164956\t313815\t12153\t214\n6/2/19\t67288\t147247\t314051\t10419\t144\n6/3/19\t77678\t141960\t314327\t6027\t152\n6/4/19\t83301\t150076\t314642\t6422\t168\n6/5/19\t78791\t134998\t314889\t5166\t143\n6/6/19\t81323\t143619\t315121\t6138\t183\n6/7/19\t82908\t150312\t315337\t7530\t256\n6/8/19\t78074\t175352\t315583\t13831\t206\n6/9/19\t73954\t167597\t315861\t12833\t121\n6/10/19\t37019\t54769\t316007\t1566\t44\n"}]},"apps":[],"jobName":"paragraph_1521594199713_-187695725","id":"20180226-143810_539762356","dateCreated":"2018-03-20T21:03:19-0400","dateStarted":"2019-08-08T19:43:36-0400","dateFinished":"2019-08-08T19:43:36-0400","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:21674"},{"title":"3.  Start a Kafka Stream for Current Station Status","text":"%sh\n# What's happening right now?  How are bikes coming and going from the various stations?\n# Shell script creates a producer that publishes to a kafka topic called \"station_status\".  \n# This is simulating bike movement across the stations.\n\n/home/oracle/bikes/bikes/kafka/start-kafka-producer.sh\n","user":"oracle","dateUpdated":"2019-08-08T20:42:11-0400","config":{"editorSetting":{"language":"sh","editOnDblClick":false},"colWidth":12,"editorMode":"ace/mode/sh","title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1521594199717_-189234721","id":"20180301-165220_221336203","dateCreated":"2018-03-20T21:03:19-0400","dateStarted":"2019-08-08T20:01:28-0400","dateFinished":"2019-08-08T20:11:02-0400","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:21684","errorMessage":""},{"title":"4.  Review the Generated Stream using a Kafka Consumer","text":"%sh\n# What does a Kafka stream look like?  \n# Create a consumer - so you can see the activity stream\n# Notice the JSON document embedded in the stream\n\n/home/oracle/bikes/bikes/kafka/start-kafka-consumer.sh\n","user":"oracle","dateUpdated":"2019-08-08T20:42:22-0400","config":{"colWidth":12,"editorMode":"ace/mode/sh","results":{},"enabled":true,"editorSetting":{"language":"sh","editOnDblClick":false},"title":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1521594199717_-189234721","id":"20180216-152129_553053263","dateCreated":"2018-03-20T21:03:19-0400","dateStarted":"2019-08-08T20:01:47-0400","dateFinished":"2019-08-08T20:02:00-0400","status":"ERROR","progressUpdateIntervalMs":500,"$$hashKey":"object:21685","errorMessage":""},{"title":"5.  Stop the Kafka Consumer","text":"%sh\n# Stop the consumer that we just created.  We will create another one soon!\n\n/home/oracle/bikes/bikes/kafka/stop-kafka-consumer.sh","user":"oracle","dateUpdated":"2019-08-08T20:42:27-0400","config":{"colWidth":12,"editorMode":"ace/mode/sh","results":{},"enabled":true,"editorSetting":{"language":"sh","editOnDblClick":false},"title":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[]},"apps":[],"jobName":"paragraph_1521594199718_-188080474","id":"20180216-165155_1501765209","dateCreated":"2018-03-20T21:03:19-0400","dateStarted":"2019-08-08T20:01:59-0400","dateFinished":"2019-08-08T20:02:00-0400","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:21686"},{"title":"6.  What's happening now?  Combine the Kafka Stream with Oracle Data","text":"%jdbc\n-- Get the latest station status from the Kafka stream\nWITH latest_status as (\n    select \"station_id\" as station_id,\n           \"num_bikes_available\" as num_bikes_available,\n           timestamp\n    from v_station_status\n    where timestamp in (\n        select max(timestamp)\n        from station_status\n        -- Leverage predicate pushdown into Kafka\n        where timestamp < current_timestamp - interval '100' second\n        )\n    )\nselect l.station_id,\n       s.station_name,\n       num_bikes_available\nfrom latest_status l, stations s\nwhere l.station_id = s.station_id\nand region_id = 70  -- Jersey City\n;","user":"oracle","dateUpdated":"2019-08-08T20:46:17-0400","config":{"editorSetting":{"language":"sql","editOnDblClick":false},"colWidth":12,"editorMode":"ace/mode/sql","title":true,"results":{"0":{"graph":{"mode":"multiBarChart","height":300,"optionOpen":false,"setting":{"multiBarChart":{}},"commonSetting":{},"keys":[{"name":"STATION_NAME","index":1,"aggr":"sum"}],"groups":[],"values":[{"name":"NUM_BIKES_AVAILABLE","index":2,"aggr":"sum"}]},"helium":{}}},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TABLE","data":"STATION_ID\tSTATION_NAME\tNUM_BIKES_AVAILABLE\n3184\tPaulus Hook\t0\n3185\tCity Hall\t4\n3186\tGrove St PATH\t16\n3187\tWarren St\t2\n3191\tUnion St\t17\n3192\tLiberty Light Rail\t20\n3193\tLincoln Park\t8\n3194\tMcGinley Square\t7\n3195\tSip Ave\t0\n3196\tRiverview Park\t5\n3198\tHeights Elevator\t6\n3199\tNewport Pkwy\t0\n3201\tDey St\t13\n3202\tNewport PATH\t9\n3203\tHamilton Park\t11\n3205\tJC Medical Center\t18\n3206\tHilltop\t1\n3207\tOakland Ave\t10\n3209\tBrunswick St\t20\n3210\tPershing Field\t8\n3211\tNewark Ave\t0\n3212\tChrist Hospital\t10\n3213\tVan Vorst Park\t2\n3214\tEssex Light Rail\t0\n3220\t5 Corners Library\t2\n3225\tBaldwin at Montgomery\t4\n3267\tMorris Canal\t4\n3268\tLafayette Park\t12\n3269\tBrunswick & 6th\t4\n3270\tJersey & 6th St\t14\n3272\tJersey & 3rd\t7\n3273\tManila & 1st\t0\n3275\tColumbus Drive\t3\n3276\tMarin Light Rail\t25\n3277\tCommunipaw & Berry Lane\t4\n3278\tMonmouth and 6th\t6\n3279\tDixon Mills\t16\n3280\tAstor Place\t11\n3281\tLeonard Gordon Park\t7\n3481\tYork St\t5\n3483\tMontgomery St\t6\n3638\tWashington St\t1\n3639\tHarborside\t10\n3640\tJournal Square\t0\n3677\tGlenwood Ave\t2\n3678\tFairmount Ave\t1\n3679\tBergen Ave\t4\n3681\tGrand St\t2\n3694\tJackson Square\t5\n3791\tHoboken Ave at Monmouth St\t18\n3792\tColumbus Dr at Exchange Pl\t0\n"}]},"apps":[],"jobName":"paragraph_1521594199719_-188465223","id":"20180226-140403_287502841","dateCreated":"2018-03-20T21:03:19-0400","dateStarted":"2019-08-08T20:46:17-0400","dateFinished":"2019-08-08T20:46:21-0400","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:21689"},{"text":"%sh\n","dateUpdated":"2018-03-20T21:03:19-0400","config":{"colWidth":12,"editorMode":"ace/mode/sh","results":{},"enabled":true,"editorSetting":{"language":"sh","editOnDblClick":false}},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1521594199727_-191543214","id":"20180305-125953_1068775989","dateCreated":"2018-03-20T21:03:19-0400","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:21696"}],"name":"Big Data SQL Workshop","id":"2DBF8A6S5","angularObjects":{"2D9EHVY3B:shared_process":[],"2D8FAE2WP:shared_process":[],"2D8MFZ2Q8:shared_process":[],"2DAGUZC2S:shared_process":[],"2D93M9NTZ:shared_process":[],"2D94H3H2S:shared_process":[],"2D9ANQG8W:shared_process":[],"2D8G4YWCQ:shared_process":[],"2D87Q4KHQ:shared_process":[],"2D6PJSJRS:shared_process":[],"2D6VJ1JKD:shared_process":[],"2D6FZXY3U:shared_process":[],"2D6H4PP4D:shared_process":[],"2D6E4WKGH:shared_process":[]},"config":{"looknfeel":"default","personalizedMode":"false"},"info":{}}